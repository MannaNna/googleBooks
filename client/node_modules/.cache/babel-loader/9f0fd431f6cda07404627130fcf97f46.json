{"ast":null,"code":"import _defineProperty from \"/Users/marianasecu/Desktop/iBookClub/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/marianasecu/Desktop/iBookClub/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/marianasecu/Desktop/iBookClub/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/marianasecu/Desktop/iBookClub/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/marianasecu/Desktop/iBookClub/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/marianasecu/Desktop/iBookClub/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/marianasecu/Desktop/iBookClub/client/src/pages/googleBooksContainer.js\";\nimport React, { Component } from \"react\";\nimport Container from \"../components/Container\";\nimport SearchForm from \"../components/SearchForm\";\nimport { BookDetail, BookList } from \"../components/BookDetail\";\nimport API from \"../utils/API\";\n\nvar GoogleContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(GoogleContainer, _Component);\n\n  function GoogleContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, GoogleContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(GoogleContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      result: [],\n      search: \"\",\n      title: \"\",\n      authors: \"\",\n      description: \"\",\n      src: \"\",\n      link: \"\",\n      id: \"\",\n      isLoggedIn: false,\n      userID: \"\",\n      name: \"\",\n      email: \"\",\n      picture: \"\"\n    };\n\n    _this.searchBooks = function (query) {\n      API.search(query).then(function (res) {\n        return _this.setState({\n          result: res.data.items\n        });\n      }).catch(function () {\n        return _this.setState({\n          result: [],\n          message: \"No New Books Found, Try a Different Query\"\n        });\n      });\n    };\n\n    _this.handleInputChange = function (event) {\n      var value = event.target.value;\n      var name = event.target.name;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.handleFormSubmit = function (event) {\n      event.preventDefault();\n\n      _this.searchBooks(_this.state.search);\n    };\n\n    _this.handleBookSave = function (id) {\n      var indexOfSaved;\n\n      var book = _this.state.result.find(function (book, index) {\n        console.log(book, index);\n        indexOfSaved = index;\n        return book.id === id;\n      });\n\n      var userIDC = _this.props.userID;\n      console.log(userIDC);\n      API.saveBook({\n        id: book.id,\n        title: book.volumeInfo.title,\n        link: book.volumeInfo.infoLink,\n        authors: book.volumeInfo.authors,\n        description: book.volumeInfo.description,\n        image: book.volumeInfo.imageLinks.thumbnail,\n        userID: userIDC\n      }).then(function () {\n        // logic to remove saved book from state\n        var booksArray = _this.state.result;\n        booksArray.splice(indexOfSaved, 1);\n\n        _this.setState({\n          result: booksArray\n        });\n      });\n      return console.log(book.id);\n    };\n\n    return _this;\n  }\n\n  _createClass(GoogleContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n      var userID = localStorage.getItem('userID');\n      var name = localStorage.getItem('name');\n      var email = localStorage.getItem('email');\n      var picture = localStorage.getItem('picture');\n      this.setState({\n        userID: userID,\n        email: email,\n        name: name,\n        picture: picture,\n        isLoggedIn: isLoggedIn\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        heading: \"Search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(SearchForm, {\n        value: this.state.search,\n        handleInputChange: this.handleInputChange,\n        handleFormSubmit: this.handleFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        heading: this.state.result.totalItems || \"Search for a Book to Begin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, this.state.result.length === 0 ? React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"No Results to Display\") : React.createElement(BookList, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, this.state.result.map(function (element, index) {\n        return React.createElement(BookDetail, {\n          key: element.id,\n          id: element.id,\n          title: element.volumeInfo.title,\n          src: element.volumeInfo.imageLinks.thumbnail,\n          authors: element.volumeInfo.authors,\n          description: element.volumeInfo.description,\n          link: element.volumeInfo.previewLink,\n          btnvalue: \"Save\",\n          onClick: function onClick(e) {\n            return _this2.handleBookSave(element.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        });\n      }))));\n    }\n  }]);\n\n  return GoogleContainer;\n}(Component);\n\nexport default GoogleContainer;","map":{"version":3,"sources":["/Users/marianasecu/Desktop/iBookClub/client/src/pages/googleBooksContainer.js"],"names":["React","Component","Container","SearchForm","BookDetail","BookList","API","GoogleContainer","state","result","search","title","authors","description","src","link","id","isLoggedIn","userID","name","email","picture","searchBooks","query","then","res","setState","data","items","catch","message","handleInputChange","event","value","target","handleFormSubmit","preventDefault","handleBookSave","indexOfSaved","book","find","index","console","log","userIDC","props","saveBook","volumeInfo","infoLink","image","imageLinks","thumbnail","booksArray","splice","localStorage","getItem","totalItems","length","map","element","previewLink","e"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Container from \"../components/Container\";\nimport SearchForm from \"../components/SearchForm\";\nimport {BookDetail, BookList} from \"../components/BookDetail\";\nimport API from \"../utils/API\";\n\nclass GoogleContainer extends Component {\n  \n\n  state = {\n    result: [],\n    search: \"\",\n    title:\"\",\n    authors:\"\",\n    description:\"\",\n    src:\"\",\n    link:\"\",\n    id:\"\",\n    isLoggedIn: false,\n    userID: \"\",\n    name: \"\",\n    email: \"\",\n    picture: \"\"\n  };\n\n  componentDidMount() {\n    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n    const userID =  localStorage.getItem('userID');\n    const name = localStorage.getItem('name');\n    const email = localStorage.getItem('email');\n    const picture = localStorage.getItem('picture');\n    this.setState({ userID, email, name, picture, isLoggedIn });\n  }\n\n\n\n  searchBooks = query => {\n   \n    API.search(query)\n      .then(res => this.setState({ result: res.data.items }))\n      .catch(() =>\n        this.setState({\n          result: [],\n          message: \"No New Books Found, Try a Different Query\"\n        })\n      );\n  };\n\n  \n\n  handleInputChange = event => {\n\n    const value = event.target.value;\n    const name = event.target.name;\n    this.setState({\n      [name]: value\n    });\n  };\n\n\n\nhandleFormSubmit = event => {\n    event.preventDefault();\n    this.searchBooks(this.state.search);\n  };\n\n\nhandleBookSave = id => {\n    let indexOfSaved;\n      const book = this.state.result.find((book, index) => {\n        console.log(book, index);\n        indexOfSaved = index;\n        return book.id === id;\n      });\n      const userIDC = this.props.userID\n      console.log(userIDC)\n      API.saveBook({\n        id: book.id,\n        title: book.volumeInfo.title,\n        link: book.volumeInfo.infoLink,\n        authors: book.volumeInfo.authors,\n        description: book.volumeInfo.description,\n        image: book.volumeInfo.imageLinks.thumbnail,\n        userID: userIDC\n      }).then(() => {\n\n        // logic to remove saved book from state\n        const booksArray = this.state.result;\n        booksArray.splice(indexOfSaved, 1);\n        this.setState({result: booksArray});\n      });\n\n      return console.log(book.id)\n    };\n\n   \n\n  render() {\n\n   \n    return (\n      \n      <Container>\n\n            <div heading=\"Search\">\n              <SearchForm\n                value={this.state.search}\n                handleInputChange={this.handleInputChange}\n                handleFormSubmit={this.handleFormSubmit}\n              />\n            </div>\n\n            <div\n              heading={this.state.result.totalItems || \"Search for a Book to Begin\"}\n            >\n              {this.state.result.length === 0 ? (\n                <h3>No Results to Display</h3>\n              ) : (\n              <BookList>\n                {this.state.result.map((element, index) => {\n                  \n                  return (\n                  \n                    <BookDetail\n                    key={element.id}\n                    id={element.id}\n                    title={element.volumeInfo.title}\n                    src={element.volumeInfo.imageLinks.thumbnail}\n                    authors={element.volumeInfo.authors}\n                    description={element.volumeInfo.description}\n                    link={element.volumeInfo.previewLink} \n                    btnvalue=\"Save\"\n                    onClick={(e) => this.handleBookSave(element.id)}\n                    /> \n                  )\n                })} \n              </BookList>   \n              )}\n          </div>\n      </Container>\n    );\n  }\n}\n\nexport default GoogleContainer;"]},"metadata":{},"sourceType":"module"}